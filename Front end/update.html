<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Update</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="style1.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    

        //show student by id
        function showStudent(){
            $.ajax({
            url: 'http://localhost:3000/api/student/' + $('#SId').val(),type: 'get',
            contentType: 'application/json',
            dataType: "json",
            success: function (data, textStatus, jQxhr) {
                    $("#sid-form2").val(data.StudentId),
                    $("#Fname-form2").val(data.FirstName),
                    $("#Lname-form2").val(data.LastName),
                    $("#email-form2").val(data.email),
                    $("#city-form2").val(data.city),
                    $("#course-form2").val(data.course), 
                    $("#guardian-form2").val(data.guardian),
                    $("#subject-form2").val(data.subject)
            },
            error: function (jqXhr, textStatus, errorThrown) {
            alert(`Student Id: ${$('#SId').val()} not found`);
            console.log(errorThrown);
            }
            });
        }

        //update student by id
        $(document).ready(function(){
            $("#updateBtn").click(function() {
                $.ajax({
                    type: 'PUT',
                    url: 'http://localhost:3000/api/student/'+ $('#sid-form2').val(),
                    contentType: 'application/json',
                    data: JSON.stringify(
                    {
                    "StudentId": $("#sid-form2").val(),
                    "FirstName": $("#Fname-form2").val(),
                    "LastName": $("#Lname-form2").val(),
                    "email": $("#email-form2").val(),
                    "city": $("#city-form2").val(),
                    "course": $("#course-form2").val(),
                    "guardian": $("#guardian-form2").val(),
                    "subject": $("#subject-form2").val()
                    }),
                    success: function (data, textStatus, jQxhr) {
                    alert("Data updated");

                    },
                    error: function (xhr, textStatus, error) {
                    alert("Error");
                    }
                    });
            });
        });
    </script>
  
</head>


  <body class="body-bg"></body>
  <div class="container col-lg-8 position-absolute top-50 start-50 translate-middle bg-white shadow-sm rounded-4">
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div class="row justify-content-center align-items-center text-center">
      <div class="col-lg-8 p-10 w-50 ">
        <h2 class="text-center" style="font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;"><br><br>Update Student</h2>

        <div>
          <input type="text" class="form-control p-3 shadow-none rounded-pill" id="SId" placeholder="Enter StudentID">
          
          <br>
          <input type="button" class="btn btn-dark p-3 btn-custom shadow-none rounded-pill w-50"
            value="Show details" onclick="showStudent()">
        </div>

        <br>


        <div class="mb-3">
          <input type="text" class="form-control p-3 shadow-none rounded-pill" id="sid-form2" placeholder="Student ID" />
        </div>
        <div class="mb-3">
          <input type="text" class="form-control p-3 shadow-none rounded-pill" id="Fname-form2" placeholder="First name" />
        </div>

        <div class="mb-3">
          <input type="text" class="form-control p-3 shadow-none rounded-pill" id="Lname-form2" placeholder="Last name" />
        </div>

        <div class="mb-3">
          <input type="text" class="form-control p-3 shadow-none rounded-pill" id="email-form2" placeholder="Email" />
        </div>

        <div class="mb-3">
          <input type="text" class="form-control p-3 shadow-none rounded-pill" id="city-form2" placeholder="NearCity" />
        </div>

        <div class="mb-3">
          <input
            type="text"
            class="form-control p-3 shadow-none rounded-pill"
            id="course-form2"
            placeholder="Course"
          />
        </div>
        

        <div class="mb-3">
          <input type="text" class="form-control p-3 shadow-none rounded-pill" id="guardian-form2" placeholder="Guardian" />
        </div>

        

        <div class="mb-3">
          <input
            type="text"
            class="form-control p-3 shadow-none rounded-pill"
            id="subject-form2"
            placeholder="Subject"
          />
        </div>
        <div class="mb-3">
          <button id="updateBtn" class="btn btn-dark p-3 btn-custom shadow-none rounded-pill w-100">
            Update
          </button>

        </div>
      </div>
    </div>
  </div>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Student Management</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" class="nav-link" href="home.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="insert.html">Insert Student</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="show.html">View Student</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="delete.html">Delete Student</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="update.html">Update Student</a>
        </li>
      </ul>
    </div>
  </nav>
</body>

</html>